<!DOCTYPE html>
<html>
<!-- Created with help from Prof. Andrews' code,
     especially code on tooltips and configurable scatterplot. -->
  <head>
    <meta charset="utf-8">
    <title>Aayam and Jamie Sparkclouds</title>
      <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
      <style type="text/css">
      h1{
        margin:0px;
        font-family:sans-serif;
        font-size:24px;
        text-align:center;
      }

      h2{
        margin:0px;
        font-family:sans-serif;
        font-size:18px;
        text-align:center;
      }
      .axis text{
          font-family:sans-serif;
          font-size:11px;
      }
      .axis path,
      .axis line{
        fill:none;
        stroke:gray;
        shape-rendering: crisp-edges;
      }
      </style>
  </head>

  <body>
    <h1>Sparkclouds</h1>
    <h2>by Aayam Poudel and Jamie Hand</h2>
    <div id="visDiv"></div>

    <script>
    var createVis = function(parent, width, height){
        /* set up margins, divs, scales */
        var margins = {top:20, left: 20, right:20, bottom:20};
        var chartWidth = width - margins.left - margins.right;
        var chartHeight = height - margins.top - margins.bottom;
        var num_rows, num_columns;
        var num_words;

        var word_list = [];

        /* svg and chart selections */
        var svg = d3.select(parent)
          .append("svg")
          .attr({width:width, height:height});

        var chart = svg.append("g")
          .attr("transform", "translate("+margins.left + "," + margins.top + ")");

        chart.append("text")
            .text("hello");

        /* function that will get called to draw vis */
        var vis = function(){
            /* make a container div for each word */
            var containers = chart.selectAll(".container")
                .data(word_list)
                .enter().append("g")
                .attr({
                    "class": "container",
                    "width": "50px",
                    "height": "60px",
                    "fill": "blue"
                });

            console.log(containers);

            containers.forEach(function(container, index){
                console.log(container);
                container.append("text")
                    .attr({
                        "class": "word"
                    })
                    .text("asdfasdfa");
                    // function(d) {
                    //     console.log(d.Name);
                    //     return d.Name;
                    // });
            });

            // NOT this, because we don't want a new container for each
            // word; we already did that above. Rather, in each container,
            // we want to append a word.
            var words = containers.selectAll(".word")
                .data(function(d) {
                    return d;
                })
                .enter().append("text")
                .attr({
                    "class": "word"
                })
                .text(function(d) {
                    console.log(d.Name);
                    return d.Name;
                });

        };

        /* load data from source into dataToVisualize */
        vis.loadData = function(data){
            word_list = data;
            /* reload vis */
            vis();
        };

        return vis;
    }; /* end createVis */

    /* create vis div */
    var vis = createVis("#visDiv", 500, 500);

    /* get data from file and draw vis with it */
    d3.csv("data.csv",
      function(error, data){
          if (error) throw error;
        console.log(data);

        /* add data to visualization */
        vis.loadData(data);

        /* draw visualization */
        vis();
    }); /* end d3.json */
    </script>
  </body>
</html>
